<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Создание расписания</title>
    <style>
        :root{
            --bg:#f0f8f0;
            --primary:#388e3c;
            --accent:#9575cd;
            --text:#4a148c;
            --light:#fff;
            --copy-color: #4caf50;
        }
        *{margin:0;padding:0;box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
        html,body{height:100%}
        body{background:var(--bg);color:var(--text);display:flex;flex-direction:column}

        header{background:var(--primary);color:var(--light);padding:12px 16px;font-size:18px;text-align:center}

        textarea{width:100%;min-height:180px;padding:8px;border:1px solid #c8e6c9;border-radius:5px;font-size:16px}
        button{width:100%;padding:12px;background:var(--accent);color:var(--light);border:none;border-radius:5px;font-size:16px;margin-bottom:8px}
        button:active{background:#7e57c2}

        .date-display{background:var(--bg);color:var(--primary);padding:10px;border-radius:5px;font-weight:700;text-align:center;margin-bottom:10px}
        .dancer-list{background:#f3e5f5;border:1px solid #d1c4e9;border-radius:5px;padding:10px;margin-top:10px}
        .dancer-list h3{color:#8c2c14;text-align:right;margin-bottom:5px;font-size:16px}
        .dancer-list ul{list-style:none}
        .dancer-list li{padding:4px 0;border-bottom:1px solid #e0e0e0}
        .dancer-list li button {
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            padding: 6px 12px;
            font-size: 14px;
            cursor: pointer;
            text-align: center;
            margin: 0 5px;
            text-decoration: none;
            color: var(--text);
            transition: background 0.3s, border 0.3s;
        }
        .dancer-list li button:hover {
            background: rgba(255, 255, 255, 1);
            border: 1px solid rgba(0, 0, 0, 0.2);
        }
        .dancer-list li button span {
            font-size: 16px;
            display: block;
            text-align: center;
        }
        .error,.success{margin-top:8px;font-size:14px}
        pre{background:#f5f5f5;border:1px solid #ccc;border-radius:5px;padding:8px;white-space:pre-wrap;word-break:break-all;font-size:13px}
    </style>
</head>
<body>
<header>Создание расписания</header>

<div>
    <textarea id="scheduleText" placeholder="дата: число и месяц

название и инфо о шоу
состав

название и инфо о шоу
состав

...
"></textarea>
    <button onclick="processSchedule()">Начать</button>
</div>

<div id="scheduleDisplay" class="dancer-list" style="display:none;">
    <h3>Расписание на день:</h3>
    <ul id="scheduleListUl"></ul>
</div>

<script>
function processSchedule() {
    const scheduleText = document.getElementById('scheduleText').value.trim();
    const scheduleDisplay = document.getElementById('scheduleDisplay');
    const scheduleListUl = document.getElementById('scheduleListUl');

    if (!scheduleText) {
        alert('Пожалуйста, введите расписание.');
        return;
    }

    // 解析日程内容
    const lines = scheduleText.split(/\r?\n/);
    let date = '', i = 0;
    if (lines.length) date = lines[i++].trim();

    const shows = {};
    while (i < lines.length) {
        while (i < lines.length && lines[i].trim() === '') i++;
        if (i >= lines.length) break;

        const showName = lines[i++].trim();
        if (!showName) continue;

        const dancers = [];
        while (i < lines.length && lines[i].trim() !== '') {
            lines[i].split(',').forEach(p => {
                const d = p.trim();
                if (d) dancers.push(d);
            });
            i++;
        }
        shows[showName] = dancers;
    }

    // 显示日程
    scheduleDisplay.style.display = 'block';
    scheduleListUl.innerHTML = '';

    Object.keys(shows).forEach(showName => {
        const li = document.createElement('li');
        li.textContent = showName;

        const ul = document.createElement('ul');
        ul.style.display = 'flex';
        ul.style.flexWrap = 'wrap';
        ul.style.gap = '5px';
        ul.style.marginTop = '5px';
        ul.style.marginBottom = '5px';

        shows[showName].forEach(dancer => {
            const dancerLi = document.createElement('li');
            dancerLi.textContent = dancer;
            ul.appendChild(dancerLi);
        });

        li.appendChild(ul);
        scheduleListUl.appendChild(li);
    });
}
</script>
</body>
</html>